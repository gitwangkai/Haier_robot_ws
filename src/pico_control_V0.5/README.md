# VRé¥æ“æ§åˆ¶ç³»ç»Ÿ (Pico Control V0.5)

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Python](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/)

ä¸€ä¸ªå®Œæ•´çš„VRé¥æ“æ§åˆ¶ç³»ç»Ÿï¼Œæ”¯æŒé€šè¿‡VRæ‰‹æŸ„ã€Webç•Œé¢å’Œç§»åŠ¨ç«¯APPæ§åˆ¶åŒè‡‚æœºæ¢°è‡‚å’Œç§»åŠ¨åº•ç›˜ã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬ç³»ç»Ÿæ˜¯ä¸€ä¸ªå¤šæ¨¡æ€é¥æ“æ§åˆ¶å¹³å°ï¼Œé›†æˆäº†ï¼š
- **VRæ§åˆ¶**: é€šè¿‡VRæ‰‹æŸ„å®ç°æ²‰æµ¸å¼é¥æ“
- **Webæ§åˆ¶**: æµè§ˆå™¨-basedæ§åˆ¶ç•Œé¢
- **APIæ§åˆ¶**: RESTful APIæ¥å£ï¼Œæ”¯æŒè¿œç¨‹æ§åˆ¶
- **ç§»åŠ¨ç«¯æ§åˆ¶**: Android APPæ§åˆ¶
- **è§†é¢‘æµ**: å®æ—¶è§†é¢‘åé¦ˆ

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   VRæ‰‹æŸ„æ§åˆ¶    â”‚    â”‚   Webç•Œé¢æ§åˆ¶   â”‚    â”‚   ç§»åŠ¨ç«¯APP     â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ æ²‰æµ¸å¼é¥æ“    â”‚    â”‚ â€¢ æµè§ˆå™¨æ§åˆ¶    â”‚    â”‚ â€¢ Android APP   â”‚
â”‚ â€¢ 6DOFæ§åˆ¶      â”‚    â”‚ â€¢ å®æ—¶åé¦ˆ      â”‚    â”‚ â€¢ è§¦æ‘¸æ§åˆ¶      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   APIæ§åˆ¶æœåŠ¡   â”‚
                    â”‚                 â”‚
                    â”‚ â€¢ RESTful API   â”‚
                    â”‚ â€¢ æœåŠ¡ç®¡ç†      â”‚
                    â”‚ â€¢ çŠ¶æ€ç›‘æ§      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   VRé¥æ“æœåŠ¡    â”‚
                    â”‚                 â”‚
                    â”‚ â€¢ åŒè‡‚æ§åˆ¶      â”‚
                    â”‚ â€¢ åº•ç›˜æ§åˆ¶      â”‚
                    â”‚ â€¢ IKæ±‚è§£        â”‚
                    â”‚ â€¢ è¿åŠ¨è§„åˆ’      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   ç¡¬ä»¶å±‚        â”‚
                    â”‚                 â”‚
                    â”‚ â€¢ åŒè‡‚æœºæ¢°è‡‚    â”‚
                    â”‚ â€¢ ç§»åŠ¨åº•ç›˜      â”‚
                    â”‚ â€¢ ä¼ æ„Ÿå™¨        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Ubuntu 20.04+ / Debian
- **Python**: 3.8+
- **ROS2**: Foxy æˆ– Humble
- **ç¡¬ä»¶**: åŒè‡‚æœºæ¢°è‡‚ + ç§»åŠ¨åº•ç›˜

### ä¾èµ–å®‰è£…

```bash
# ç³»ç»Ÿä¾èµ–
sudo apt update
sudo apt install python3-pip python3-flask python3-flask-cors
sudo apt install ros-humble-desktop  # æ ¹æ®ä½ çš„ROSç‰ˆæœ¬è°ƒæ•´

# Pythonä¾èµ–
pip3 install flask flask-cors flask-socketio eventlet psutil roboticstoolbox scipy numpy
```

### ä¸€é”®å®‰è£…

```bash
cd scripts
./install_service.sh
```

æ­¤è„šæœ¬å°†è‡ªåŠ¨ï¼š
- âœ… å®‰è£…systemdæœåŠ¡
- âœ… é…ç½®APIæœåŠ¡å¼€æœºè‡ªå¯
- âœ… è®¾ç½®sudoå…å¯†æƒé™
- âœ… é…ç½®æ—¥å¿—è½®è½¬

## ğŸ“– ä½¿ç”¨æŒ‡å—

### 1. VRæ§åˆ¶æ¨¡å¼

```bash
# å¯åŠ¨VRé¥æ“æœåŠ¡
python3 vr_arm_control_V0.5.py
```

**VRæ§åˆ¶è¯´æ˜**:
- å·¦è‡‚: VRå·¦æ§åˆ¶å™¨æ§åˆ¶
- å³è‡‚: VRå³æ§åˆ¶å™¨æ§åˆ¶
- åº•ç›˜: æ‰‹æŸ„æ‘‡æ†æ§åˆ¶ç§»åŠ¨
- åŠŸèƒ½: 6DOFä½å§¿æ§åˆ¶ + IKæ±‚è§£

### 2. Webæ§åˆ¶æ¨¡å¼

```bash
# å¯åŠ¨Webæ§åˆ¶æœåŠ¡
python3 web_control.py
```

è®¿é—® `http://localhost:5000` è¿›è¡Œæ§åˆ¶

### 3. APIæ§åˆ¶æ¨¡å¼

```bash
# å¯åŠ¨APIæœåŠ¡
python3 remote_control_api.py
```

**APIæ¥å£**:
- `GET /health` - å¥åº·æ£€æŸ¥
- `GET /status` - è·å–æœåŠ¡çŠ¶æ€
- `POST /start` - å¯åŠ¨VRæœåŠ¡
- `POST /stop` - åœæ­¢VRæœåŠ¡
- `POST /restart` - é‡å¯VRæœåŠ¡
- `GET /logs` - è·å–æ—¥å¿—

**ä½¿ç”¨ç¤ºä¾‹**:
```bash
# æ£€æŸ¥APIçŠ¶æ€
curl http://localhost:8083/health

# å¯åŠ¨VRæœåŠ¡
curl -X POST http://localhost:8083/start

# è·å–æœåŠ¡çŠ¶æ€
curl http://localhost:8083/status
```

### 4. ç§»åŠ¨ç«¯æ§åˆ¶

å®‰è£… `apk/` ç›®å½•ä¸‹çš„Android APPï¼Œé€šè¿‡ç½‘ç»œè¿æ¥æ§åˆ¶æœºæ¢°è‡‚ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
pico_control_V0.5/
â”œâ”€â”€ ğŸ“‚ scripts/                 # å®‰è£…è„šæœ¬
â”‚   â”œâ”€â”€ install_service.sh     # ä¸€é”®å®‰è£…è„šæœ¬
â”‚   â”œâ”€â”€ vr-arm-control.service # VRæœåŠ¡systemdé…ç½®
â”‚   â””â”€â”€ remote-control-api.service # APIæœåŠ¡systemdé…ç½®
â”œâ”€â”€ ğŸ“‚ readme/                  # è¯¦ç»†æ–‡æ¡£
â”‚   â”œâ”€â”€ å¯åŠ¨å…³é—­API_README.md   # APIæ§åˆ¶æ–‡æ¡£
â”‚   â”œâ”€â”€ æœºå™¨ç¨‹åºè‡ªå¯æ“ä½œ.md     # è‡ªå¯é…ç½®æ–‡æ¡£
â”‚   â””â”€â”€ è®¾ç½®èˆµæœºè¡Œç¨‹.md         # èˆµæœºé…ç½®æ–‡æ¡£
â”œâ”€â”€ ğŸ“‚ static/                  # Webé™æ€èµ„æº
â”‚   â”œâ”€â”€ script.js              # å‰ç«¯æ§åˆ¶è„šæœ¬
â”‚   â””â”€â”€ style.css              # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ ğŸ“‚ templates/               # Webæ¨¡æ¿
â”‚   â””â”€â”€ index.html             # æ§åˆ¶ç•Œé¢
â”œâ”€â”€ ğŸ“‚ arm_data/                # æœºæ¢°è‡‚æ•°æ®æ–‡ä»¶
â”œâ”€â”€ ğŸ“‚ apk/                     # Android APP
â”œâ”€â”€ ğŸ“‚ resource/                # èµ„æºæ–‡ä»¶
â”œâ”€â”€ remote_control_api.py       # APIæ§åˆ¶æœåŠ¡
â”œâ”€â”€ vr_arm_control_V0.5.py      # VRé¥æ“ä¸»ç¨‹åº
â”œâ”€â”€ web_control.py              # Webæ§åˆ¶æœåŠ¡
â”œâ”€â”€ filter_tool.py              # æ»¤æ³¢å·¥å…·
â”œâ”€â”€ vr_server_config.txt       # VRæœåŠ¡å™¨é…ç½®
â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
```

## âš™ï¸ é…ç½®è¯´æ˜

### VRæœåŠ¡å™¨é…ç½®

ç¼–è¾‘ `vr_server_config.txt`:
```
{
    "vr_server_ip": "192.168.0.104",
    "vr_server_port": 12345
}
```

### ä¸²å£é…ç½®

åœ¨ä»£ç ä¸­é…ç½®æœºæ¢°è‡‚ä¸²å£:
```python
LEFT_ARM_PORT = '/dev/ttyUSB10'   # å·¦è‡‚ä¸²å£
RIGHT_ARM_PORT = '/dev/arm_right' # å³è‡‚ä¸²å£
```

### ç½‘ç»œé…ç½®

APIæœåŠ¡é»˜è®¤ç›‘å¬ `0.0.0.0:8083`
WebæœåŠ¡é»˜è®¤ç›‘å¬ `0.0.0.0:5000`

## ğŸ”§ å¼€å‘ä¸è°ƒè¯•

### æ—¥å¿—æŸ¥çœ‹

```bash
# APIæœåŠ¡æ—¥å¿—
sudo journalctl -u remote-control-api -f

# VRæœåŠ¡æ—¥å¿—
sudo journalctl -u vr-arm-control -f
```

### æœåŠ¡ç®¡ç†

```bash
# APIæœåŠ¡
sudo systemctl start remote-control-api
sudo systemctl stop remote-control-api
sudo systemctl restart remote-control-api

# VRæœåŠ¡ (é€šè¿‡APIæ§åˆ¶)
curl -X POST http://localhost:8083/start
curl -X POST http://localhost:8083/stop
```

### æ•…éšœæ’é™¤

1. **ä¸²å£è¿æ¥é—®é¢˜**
   ```bash
   # æ£€æŸ¥ä¸²å£è®¾å¤‡
   ls /dev/ttyUSB* /dev/arm_*
   ```

2. **ç½‘ç»œè¿æ¥é—®é¢˜**
   ```bash
   # æ£€æŸ¥ç«¯å£å ç”¨
   netstat -tlnp | grep :8083
   ```

3. **ROS2ç¯å¢ƒé—®é¢˜**
   ```bash
   # ç¡®ä¿ROS2ç¯å¢ƒå·²åŠ è½½
   source /opt/ros/humble/setup.bash
   ```

## ğŸ“Š æŠ€æœ¯ç‰¹æ€§

### VRæ§åˆ¶ç‰¹æ€§
- âœ… 6DOFä½å§¿æ§åˆ¶
- âœ… å®æ—¶IKæ±‚è§£
- âœ… è¿åŠ¨å¹³æ»‘æ»¤æ³¢
- âœ… å…³èŠ‚é™ä½ä¿æŠ¤
- âœ… ç•¸å½¢è§£æ£€æµ‹ä¸ä¿®æ­£

### Webæ§åˆ¶ç‰¹æ€§
- âœ… å®æ—¶Socket.IOé€šä¿¡
- âœ… å“åº”å¼ç•Œé¢è®¾è®¡
- âœ… å¤šå…³èŠ‚ç‹¬ç«‹æ§åˆ¶
- âœ… çŠ¶æ€å®æ—¶åé¦ˆ

### APIæ§åˆ¶ç‰¹æ€§
- âœ… RESTfulè®¾è®¡
- âœ… systemctlé›†æˆ
- âœ… æƒé™æ§åˆ¶
- âœ… æ—¥å¿—è®°å½•

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

- APIæœåŠ¡ç›‘å¬æ‰€æœ‰åœ°å€ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®é…ç½®é˜²ç«å¢™
- sudoæƒé™ä»…é™äºsystemctlå‘½ä»¤æ§åˆ¶
- æ—¥å¿—æ–‡ä»¶å¯èƒ½åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œå¦¥å–„ä¿ç®¡
- VRæœåŠ¡å™¨IPé…ç½®éœ€è¦éªŒè¯æœ‰æ•ˆæ€§

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œè¯·æŒ‰ä»¥ä¸‹é¡ºåºæ’æŸ¥ï¼š

1. **æ£€æŸ¥æœåŠ¡çŠ¶æ€**
   ```bash
   sudo systemctl status remote-control-api
   sudo systemctl status vr-arm-control
   ```

2. **æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—**
   ```bash
   sudo journalctl -u remote-control-api -n 50
   sudo journalctl -u vr-arm-control -n 50
   ```

3. **æµ‹è¯•APIè¿æ¥**
   ```bash
   curl http://localhost:8083/health
   ```

4. **æ£€æŸ¥ç¡¬ä»¶è¿æ¥**
   ```bash
   ls /dev/ttyUSB* /dev/arm_*
   ```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

---

**ç‰ˆæœ¬**: V0.5
**æ›´æ–°æ—¥æœŸ**: 2025å¹´11æœˆ6æ—¥
**ç»´æŠ¤è€…**: BytePeace</content>
<parameter name="filePath">/home/walt/Desktop/data/code/haier_0820/arm_pico_control/pico_control_V0.5/README.md